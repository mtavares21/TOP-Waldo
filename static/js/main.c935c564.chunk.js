(this.webpackJsonpwaldo=this.webpackJsonpwaldo||[]).push([[0],{12:function(e,t,r){e.exports={list:"list_list__21g88",li:"list_li__1JHFr",input:"list_input__1wnaO"}},22:function(e,t,r){e.exports={wrapper:"scoreBoard_wrapper__1SqZq"}},27:function(e,t,r){},33:function(e,t,r){},35:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r(18),c=r.n(a),i=(r(27),r(9)),o=r(15),s=r.n(o),l=r(19),u=r(6);r(36);function d(e,t){u.a.firestore().collection("images").doc(e).set(t)}function m(){return(m=Object(l.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.firestore().collection("timers").doc(t).get();case 2:return r=e.sent,e.abrupt("return",r.exists?r.data():console.log("error"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.initializeApp({apiKey:"AIzaSyCDdjsr3F6WO5DWqkRnONMN59AZxn_m8WM",authDomain:"waldo-39119.firebaseapp.com",projectId:"waldo-39119",storageBucket:"waldo-39119.appspot.com",messagingSenderId:"304422655857",appId:"1:304422655857:web:8bf691db487958d7a788d0"}),d("image1",{name:"image1",src:"https://3hwuuuxcz5o651g144s0kw10-wpengine.netdna-ssl.com/wp-content/uploads/2016/07/G3M_Wheres_Waldo.jpg",char:[{name:"Waldo",coord:[968,37]},{name:"Oldlaw",coord:[59,540]}]}),d("image2",{name:"image2",src:"https://i.imgur.com/4B42MkD.jpeg",char:[{name:"Waldo",coord:[518,563]},{name:"Oldlaw",coord:[709,709]},{name:"Wizard Whitebard",coord:[789,581]}]}),d("image3",{name:"image3",src:"https://4.bp.blogspot.com/-NjohvYgHUQU/Ttcs_ommPRI/AAAAAAAABA0/wm6M6HxbI28/s1600/Play+Wheres+Waldo+Online+Puzzle+Game+Department+Store+Shopping+Mall.jpg",char:[{name:"Waldo",coord:[505,137]},{name:"Oldlaw",coord:[235,554]},{name:"Wenda",coord:[353,554]}]}),d("image4",{name:"image4",src:"https://4.bp.blogspot.com/-H9JDgPrgsfc/TtcrDPO5vvI/AAAAAAAABAc/1roVH5Ni83Y/s1600/Play+Wheres+Waldo+Online+Puzzle+Game+Medieval+Gluttons.jpg",char:[{name:"Waldo",coord:[466,250]},{name:"Wizard Whitebard",coord:[1020,652]}]}),d("image5",{name:"image5",src:"https://i.imgur.com/e8gNYDI.jpeg",char:[{name:"Oldlaw",coord:[449,72]},{name:"Wizard Whitebard",coord:[1147,184]},{name:"Wenda",coord:[705,629]}]}),d("image6",{name:"image1",src:"https://i.imgur.com/btsRJjC.jpeg",char:[{name:"Waldo",coord:[201,656]},{name:"Wizard Whitebard",coord:[347,106]},{name:"Wenda",coord:[908,591]}]});var p=r(20),h=r(21),g=(r(33),r(1));function j(){return Object(g.jsx)("header",{style:{backgroundColor:"#F71735",height:"100px",width:"100%",display:"flex",alignItems:"center"},children:Object(g.jsx)("h1",{style:{color:"rgb(220,250,250)",margin:"0",marginLeft:"20px",fontSize:"46px"},children:"Where is Waldo? "})})}var f=r(8);function b(e){var t=e.onClick,r=e.show;return Object(g.jsx)("div",{className:"circle",onClick:t,style:{display:r?"none":"flex"},children:Object(g.jsx)("div",{className:"playIcon"})})}function x(e){var t=e.image,r=e.onClick;return Object(g.jsx)("img",{src:t.src,width:"1000px",alt:"Find Waldo.",onClick:r})}function O(e){var t=e.coord;return Object(g.jsx)("div",{style:{top:t[1]-25+"px",left:t[0]-15+"px",display:t.length?"flex":"none",position:"absolute",zIndex:"1000",width:"30px",height:"50px",border:"1px solid black",backgroundColor:"rgba(240,240,240,0.4)"}})}var v=r(12),y=r.n(v),w=function(e){return function(t){var r=t+e/2,n=function(e){return e<=0?0:e};return[n(t-e/2),n(r)]}};function I(e){var t=e.coord,r=e.setCoord,n=e.char,a=e.dispatchImage,c=(e.timer,e.setTimer,e.isGameOver,e.currImage),i=function(){var e=c.char.filter((function(e){return function(e,t,r){var n=w(r[0]),a=w(r[1]),c={x:n(t[0]),y:a(t[1])},i=function(e,t){return t>e[0]&&t<e[1]};return i(c.x,e[0])&&i(c.y,e[1])}(e.coord,[t.layer[0],t.layer[1]],[30,50])}));return e.length?e[0]:null};return Object(g.jsx)("div",{children:Object(g.jsx)("ul",{style:{display:t.page.length?"flex":"none",left:t.page[0]+15+"px",top:t.page[1]-37+"px"},className:y.a.list,children:n.map((function(e){return Object(g.jsx)("li",{className:y.a.li,onClick:function(n){return function(e,n){if(e.stopPropagation(),i()){if(i().name===n.name){var c=Object.assign({},i(),{pageCoord:t.page});a({type:"char found",charFound:c}),r((function(e){return{page:[],layer:[]}}))}}else r((function(e){return{page:[],layer:[]}}))}(n,e)},children:Object(g.jsx)("input",{className:y.a.input,type:"button",value:e.name})},n+e.name)}))})})}function W(e){var t=e.coord;return Object(g.jsx)("div",{style:{left:t[0]-30+"px",top:t[1]-30+"px",position:"absolute",zIndex:"1000",margin:"0",width:"50px",height:"50px",border:"5px solid red",borderRadius:"50%",background:"transparent"}})}function A(e){var t=e.currImage,r=e.isGameOver,n=e.charFound,a=e.char,c=e.dispatchImage,o=e.setTimer,s=e.timer,l=e.startTimer,u=Object(f.useState)({page:[],layer:[]}),d=Object(i.a)(u,2),m=d[0],p=d[1];return Object(g.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(g.jsx)(O,{coord:m.page}),Object(g.jsx)(I,{coord:m,setCoord:p,setTimer:o,isGameOver:r,timer:s,currImage:t,dispatchImage:c,char:a,charFound:n}),n.length?Object(g.jsx)("div",{children:n.map((function(e){return Object(g.jsx)(W,{coord:e.pageCoord},e.pageCoord)}))}):null,Object(g.jsxs)("div",{className:"containPlay",children:[Object(g.jsx)(x,{image:t,onClick:s?function(e){return r()?alert("You already found everybody! Congrats"):p((function(t){return{page:[e.pageX,e.pageY],layer:[e.nativeEvent.layerX,e.nativeEvent.layerY]}}))}:null}),Object(g.jsx)(b,{onClick:l,show:!!s})]})]})}function k(e){var t=e.images,r=e.handleNewImage;return Object(g.jsx)("div",{style:{display:"flex",width:"1300px",flexWrap:"nowrap",alignItems:"center",justifyContent:"left",margin:"auto",overflowX:"auto"},children:t.map((function(e){return Object(g.jsx)("img",{onClick:function(){return r(e)},style:{objectFit:"cover",width:"200px",height:"130px",margin:"20px"},src:e.src,alt:"preview"},e.src)}))})}var C=r(22),F=r.n(C);function N(e){var t=e.show,r=e.handleNewScore,n=e.time;return Object(g.jsxs)("form",{style:{margin:"10px",display:t?"block":"none"},children:[Object(g.jsx)("h3",{children:" Add your time:"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("label",{children:"Name:"}),Object(g.jsx)("input",{style:{position:"relative",left:"10px"},type:"text",required:!0}),Object(g.jsx)("button",{style:{position:"relative",left:"20px"},type:"button",onClick:r,children:"Submit"}),Object(g.jsx)("h1",{children:n})]})]})}function S(){return Object(g.jsxs)("h1",{style:{paddingTop:"10px",width:"100%",textAlign:"center",backgroundColor:"rgb(247, 23, 53)",margin:0,color:"white",height:"50px"},children:[" ","ScoreBoard"]})}function T(e){var t=e.scores;return Object(g.jsxs)("div",{style:{display:t.length?"flex":"none",flexWrap:"noWrap",justifyContent:"center",width:"100%"},children:[Object(g.jsxs)("div",{style:{marginRight:"50px"},children:[Object(g.jsx)("h2",{style:{margin:0},children:" Place "}),Object(g.jsx)("ol",{style:{listStyle:"none",padding:0,textAlign:"center"},children:t.map((function(e,t){return Object(g.jsx)("li",{children:t+1+"."},t)}))})]}),Object(g.jsxs)("div",{style:{marginRight:"50px"},children:[Object(g.jsx)("h2",{style:{margin:0,textAlign:"center"},children:" Player "}),Object(g.jsx)("ol",{style:{listStyle:"none",padding:0,textAlign:"center"},children:t.map((function(e,t){return Object(g.jsx)("li",{children:e.name},t)}))})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{style:{margin:0},children:" Time "}),Object(g.jsx)("ol",{style:{listStyle:"none",padding:0,textAlign:"center"},children:t.map((function(e,t){return Object(g.jsx)("li",{children:e.time},t)}))})]})]})}function _(e){var t=e.time,r=e.setTime,a=e.dispatchImage,c=e.setTimer,o=e.currImage,s=Object(f.useState)([]),l=Object(i.a)(s,2),d=l[0],m=l[1],p=Object(f.useState)(!0),h=Object(i.a)(p,2),j=h[0],b=h[1],x=Object(f.useRef)(null),O=function(){var e,t=[];(e=o,u.a.firestore().collection(e+"scores").orderBy("time","asc").limit(15).get()).then((function(e){e.forEach((function(e){var r={name:e.data().name,time:e.data().time};t.push(r)})),m((function(e){return t})),b((function(e){return!1})),r((function(e){return"submited"}))}))},v=Object(n.useCallback)((function(){d.length&&(b((function(e){return!0})),m((function(e){return[]})),a({type:"reset"}),c((function(e){return 0})))}),[a,d,c]);return Object(f.useEffect)((function(){function e(e){x.current&&!x.current.contains(e.target)&&t&&v()}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[x,v,t]),Object(g.jsx)("div",{className:F.a.wrapper,children:Object(g.jsxs)("div",{ref:x,style:{width:"340px",backgroundColor:"white"},children:[Object(g.jsx)(S,{}),Object(g.jsx)(N,{show:j,handleNewScore:function(e){if(""!==e.target.form[0].value){var r=e.target.form[0].value;!function(e,t,r){u.a.firestore().collection(e+"scores").doc().set({timestamp:u.a.firestore.FieldValue.serverTimestamp(),time:r,name:t})}(o,r,t),O()}else O()},time:t}),Object(g.jsx)(T,{scores:d})]})})}var z={images:[],currImage:null,char:[],charFound:[]};function P(e,t){var r=e.images,n=e.currImage,a=e.char,c=e.charFound;if("default image"===t.type)return{images:r,currImage:r[0],char:r[0].char,charFound:c};if("add images"===t.type)return{images:t.images,currImage:n,char:a,charFound:[]};if("select image"===t.type)return{images:r,currImage:t.image,char:t.image.char,charFound:[]};if("char found"===t.type)return{images:r,currImage:n,char:a.filter((function(e){return e.name!==t.charFound.name})),charFound:c.concat(t.charFound)};if("reset"===t.type)return{images:r,currImage:r[0],char:r[0].char,charFound:[]};throw new Error}function E(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),o=Object(i.a)(c,2),s=o[0],l=o[1],d=Object(n.useReducer)(P,z),b=Object(i.a)(d,2),x=b[0],O=b[1],v=x.images,y=x.currImage,w=x.char,I=x.charFound,W=Object(n.useCallback)((function(){return 0===w.length&&!!I.length}),[I,w]);Object(f.useEffect)((function(){var e=[];u.a.firestore().collection("images").get().then((function(t){t.forEach((function(t){return e.push(t.data())})),O({type:"add images",images:h.cloneDeep(e)}),O({type:"default image"})})).catch((function(e){return console.log(e)}))}),[O]),Object(f.useEffect)((function(){var e;return W()&&(e=r,u.a.firestore().collection("timers").doc(e).update({stop:u.a.firestore.FieldValue.serverTimestamp()}).catch((function(e){return console.log("Failed to update timer")}))).then((function(e){return function(e){return m.apply(this,arguments)}(r).then((function(e){var t=e.stop-e.start;l(Math.round(100*t)/100)}))})),function(){return W()?function(e){u.a.firestore().collection("timers").doc(e).delete()}(r):null}}),[W,r]);return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(j,{}),Object(g.jsx)(k,{images:v,handleNewImage:function(e){O({type:"select image",image:e}),a((function(e){return 0}))}}),Object(g.jsxs)("div",{className:"playWrap",children:[W()&&s?Object(g.jsx)(_,{time:s,setTime:l,setTimer:a,dispatchImage:O,currImage:y.name}):null,y?Object(g.jsx)(A,{isGameOver:W,setTimer:a,timer:r,startTimer:function(e){e.stopPropagation();var t=Object(p.v4)();a((function(e){return t})),function(e){u.a.firestore().collection("timers").doc(e).set({start:u.a.firestore.FieldValue.serverTimestamp()}).catch((function(e){return console.log("Failed to set timer")}))}(t)},dispatchImage:O,char:w,charFound:I,currImage:y}):null]})]})}c.a.render(Object(g.jsx)(E,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.c935c564.chunk.js.map